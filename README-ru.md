# GridView.js
Класс для создания таблиц.
Текущая версия 0.1.

Читать документацию на других языках:
* EN - English - https://github.com/urcosmos/gridview.js/blob/master/readme.md
## Содержание
* [Вступление](#вступление)
* [Возможности](#возможности)
* [Документация](#документация)
  * [Старт](#старт)
  * [Входящие данные](#входящие-данные)
  * [Конфигурация таблицы](#конфигурация-таблицы)
* [Пример использования](#пример-использования)
* [Обновления](#обновления)
* [Лицензия](#лицензия)

### Вступление
[Вернуться к содержанию][toc]

GridView.js представляет собой класс для создания таблиц из массива данных.
Файл является продолжением и изменением класса GridView Александра Лущенко в его курсе по ООП в JS (https://itgid.info/).

### Возможности
[Вернуться к содержанию][toc]

* Формировать таблицу из массива данных и задать ей стили css;
* Добавить название таблицы и задать ему стили css;
* Выводить данные в ячейку либо в виде чистого текста, либо в виде html;
* Настроить функцию обработки значения ячейки.

### Документация
[Вернуться к содержанию][toc]

#### Старт
[Вернуться к содержанию][toc]

Для начала подключаем файл GridView.js к проекту. Можете воспользоваться минифицированной версией.

```html
<!-- index.html -->

<script src="js/class/GridView.js"></script>
<!-- или -->
<script src="js/class/GridView.min.js"></script>
```

Затем в своем основном файле со скриптами необходимо создать объект класса GridView.

```js
// script.js

// создаем объект
let gridView = new GridView();
```

Далее задать конфигурации таблицы...

```js
// script.js

// конфигурация таблицы
const gridViewConfig = {
  // перечень параметров конфигурации
};
```

...и выполнить метод `.render()`, чтобы добавить таблицу на страницу.

```js
// script.js

// добавление таблицы на страницу
gridView.render(gridViewConfig); // передаем конфигурацию табицы в качестве параметра в метод .render()
```

Также, для таблицы потребуются входящие данные, которые будут в ней отображаться. Расположите их до создания объекта.

```js
// script.js

// входящие данные для таблицы
const dataExample = [{
    // перечень данных для одной строки
  },
  {
    // перечень данных для одной строки
  },
    // и т.д.
];
```

#### Входящие данные
[Вернуться к содержанию][toc]

Входящие данные должны быть представлены массивом объектов, где каждый объект - это данные одной строки будущей таблицы. Ключ объекта - название столбца, значение - данные ячейки. Количество столбцов неограничено. Ключ объекта должен совпадать с настройками атрибутов (названиями столбцов) (см. раздел [Конфигурация таблицы](#конфигурация-таблицы)).

```js
// script.js

// пример входящих данных с двумя строками будущей таблицы (не считая строки-заголовка)
const dataExample = [{
    company: 'Masters Co. <b>Unlimited</b>',
    chef: 'John Ford',
    country: 'German'
  },
  {
    company: 'Max FX',
    chef: 'Maxim Root',
    country: 'USA'
  }
];
```

Как видно в примере, в первой ячейке первой строки столбца "company" есть html-тег. В настройках атрибутов таблицы будет опция, которая указывает показать такой текст как есть или преобразовать в html-тег. Подбробнее об этом в разделе [Конфигурация таблицы](#конфигурация-таблицы).

#### Конфигурация таблицы
[Вернуться к содержанию][toc]

Конфигурация таблицы необходима для задания настроек отображения таблицы, передачи входящих данных и настройки столбцов таблицы.

```js
// script.js

// пример установки необходимых параметров
const gridViewConfig = {
  parent: '.gridview-container',
  titleTag: 'h1',
  titleText: 'GridView title example',
  titleClass: ['header'],
  tableClass: ['table-class'],
  attribute: {
    'company': {
      'label': 'Company',
      'html': true,
    },
    'chef': {
      'label': 'Chef',
    },
    'country': {
      'label': 'Country',
      'value': (rowArr) => {
        if (rowArr.country === 'German') {
          return rowArr.country + ' map';
        }
        return rowArr.country;
      }
    }
  },
  data: dataExample
};
```

Подробнее про каждый параметр и его особенности.

**parent**

В данном параметре вы указываете элемент, в который нужно поместить таблицу, т.е. родителя таблицы. По умолчанию это тег `<body>`. Возможен выбор по тегу, классу или идентификатору элемента.

```js
// выбор первого на странице элемента div
parent: 'div',

// ...или выбор по css классу
parent: '.gridview-container',

// ...или выбор по идентификатору
parent: '#gridview-container',
```

**titleTag**

В данном параметре вы указываете тег для названия таблицы. По умолчанию это тег `<h2>`. Если вам не нужно создавать название таблицы, укажите `false` в качестве значения для данного параметра.

```js
// выбор тега h1, например, для названия таблицы
titleTag: 'h1',

// ... или указание, что название не нужно создавать
titleTag: false,
```

**titleText**

В данном параметре вы указываете само название таблицы - текст, который будет отображаться. По умолчанию задано название `GridView table title`.

```js
// пример названия таблицы
titleText: 'GridView title example',
```

**titleClass**

В данном параметре вы указываете перечень классов css, которые нужно присвоить для названия. По умолчанию ни одного класса не задано. Данный параметр принимает на вход массив классов.

```js
// названию таблицы будет добавлен один класс header
titleClass: ['header'],
```

**tableClass**

В данном параметре вы указываете перечень классов css, которые нужно присвоить таблице. По умолчанию ни одного класса не задано. Данный параметр принимает на вход массив классов, аналогично `titleClass`.

```js
// таблице будет добавлен один класс table-class
tableClass: ['table-class'],
```

**attribute**

В данном параметре вы настраиваете столбцы таблицы. Данный параметр принимает на вход объект, в котором ключи - названия столбцов, которые должны совпадать с ключами объекта входящих данных (см. раздел [Входящие данные](#входящие-данные)). Значения ключей - объект с настройками столбцов.

`label` отвечает за название столбца - что будет написано в ячейке в строке-заголовке таблицы, принимает строку.

`html` отвечает за отображение тегов html. Установите `true`, если нужно в ячейках столбца отображать html элементы при их наличии. Установить `false`, если нужен текст как есть.

`value` отвечает за обработку ячеек. Здесь указана функция, которая принимает в качестве параметра объект из входящих данных (т.е. целую строку таблицы) и выполняет над ней заданные действия.

```js
attribute: {
    'company': { // название столбца совпадает с ключом объекта из входящих данных
      'label': 'Company', // текст, который будет в ячейке в строке-заголовке таблицы
      'html': true, // в той ячейке, где есть html теги, последние будут отображаться
    },
    'chef': { // название столбца совпадает с ключом объекта из входящих данных
      'label': 'Chef', // текст, который будет в ячейке в строке-заголовке таблицы
    },
    'country': { // название столбца совпадает с ключом объекта из входящих данных
      'label': 'Country', // текст, который будет в ячейке в строке-заголовке таблицы
      'value': (rowArr) => { // функция, обрабатывающая значение ячейки каждой строки данного столбца
        if (rowArr.country === 'German') {
          return rowArr.country + ' map';
        }
        return rowArr.country;
      }
    }
  },
```

В примере выше параметр `rowArr` - это объект из константы `dataExample` (из набора входящих данных).

**data**

В данном параметре вы указываете массив входящих данных. Принимает на вход объект массив объектов.

```js
// указание на ранее созданный массив данных
data: dataExample
```

### Пример использования
[Вернуться к содержанию][toc]

```js
// script.js

// создаем массив входящих данных
const dataExample = [{
    company: 'Masters Co. <b>Unlimited</b>',
    chef: 'John Ford',
    country: 'German'
  },
  {
    company: 'Max FX',
    chef: 'Maxim Root',
    country: 'USA'
  },
  {
    company: 'Sigma',
    chef: 'Fedor Valuksta',
    country: 'Canada'
  },
  {
    company: 'Harry\'s Muse',
    chef: 'Harold York',
    country: 'Ireland'
  }
];

// создаем объект
let gridView = new GridView();

// настраиваем таблицу
const gridViewConfig = {
  parent: '.gridview-container',
  titleTag: 'h1',
  titleText: 'GridView title example',
  titleClass: ['header'],
  tableClass: ['table-class'],
  attribute: {
    'company': {
      'label': 'Company',
      'html': true,
    },
    'chef': {
      'label': 'Chef',
    },
    'country': {
      'label': 'Country',
      'value': (rowArr) => {
        if (rowArr.country === 'German') {
          return rowArr.country + ' map';
        }
        return rowArr.country;
      }
    }
  },
  data: dataExample
};

// выводим таблицу на страницу
gridView.render(gridViewConfig);
```

```css
// gridView.css

table {
  border-collapse: collapse;
  border: 1px solid darkslategray;
}

table tr,
td,
th {
  border: 2px solid darkslateblue;
}

table td,
th {
  padding: 10px;
  font-family: 'Open Sans', sans-serif;
}

table th {
  font-family: 'Montserrat', sans-serif;
  text-transform: uppercase;
  color: darkslateblue
}

.header {
  color: darkslateblue;
  font-family: 'Montserrat', sans-serif;
}

.table-class {
  border: 5px dotted hotpink
}
```

Результат выполнения:

![GridView example](https://evoe.dev/images/gridview.js/example.png)

### Обновления
[Вернуться к содержанию][toc]

Текущая версия 0.1.
Обновлений нет.

### Лицензия
[Вернуться к содержанию][toc]

Лицензия MIT.

<!-- Ссылки -->
[toc]: #содержание
